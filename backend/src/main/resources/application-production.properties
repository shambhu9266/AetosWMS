# Production Configuration for High-Performance Server

# Server Configuration
server.port=8080
server.servlet.context-path=/api
server.compression.enabled=true
server.compression.mime-types=text/html,text/xml,text/plain,text/css,text/javascript,application/javascript,application/json
server.compression.min-response-size=1024

# Database Configuration - PostgreSQL
spring.datasource.url=jdbc:postgresql://localhost:5432/procuredb
spring.datasource.username=${DB_USERNAME:procure_user}
spring.datasource.password=${DB_PASSWORD:secure_password}
spring.datasource.driver-class-name=org.postgresql.Driver

# Connection Pool Configuration (HikariCP) - Optimized for High Volume
spring.datasource.hikari.maximum-pool-size=100
spring.datasource.hikari.minimum-idle=20
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.leak-detection-threshold=60000
spring.datasource.hikari.pool-name=ProcureHikariCP

# Performance optimizations for high concurrency
spring.datasource.hikari.auto-commit=true
spring.datasource.hikari.cache-prep-stmts=true
spring.datasource.hikari.prep-stmt-cache-size=500
spring.datasource.hikari.prep-stmt-cache-sql-limit=2048
spring.datasource.hikari.use-server-prep-stmts=true
spring.datasource.hikari.use-local-session-state=true
spring.datasource.hikari.rewrite-batched-statements=true
spring.datasource.hikari.cache-result-set-metadata=true
spring.datasource.hikari.cache-server-configuration=true
spring.datasource.hikari.elide-set-auto-commits=true

# JPA/Hibernate Configuration
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.properties.hibernate.use_sql_comments=false

# Performance Optimizations - Enhanced for High Volume
spring.jpa.properties.hibernate.jdbc.batch_size=100
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.jdbc.batch_versioned_data=true
spring.jpa.properties.hibernate.connection.provider_disables_autocommit=true
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true
spring.jpa.properties.hibernate.temp.use_jdbc_metadata_defaults=false

# Query Performance Optimizations
spring.jpa.properties.hibernate.query.plan_cache_max_size=4096
spring.jpa.properties.hibernate.query.plan_parameter_metadata_max_size=256
spring.jpa.properties.hibernate.jdbc.fetch_size=100
spring.jpa.properties.hibernate.default_batch_fetch_size=50

# Second Level Cache Configuration
spring.jpa.properties.hibernate.cache.use_second_level_cache=true
spring.jpa.properties.hibernate.cache.use_query_cache=true
spring.jpa.properties.hibernate.cache.region.factory_class=org.hibernate.cache.jcache.JCacheRegionFactory
spring.jpa.properties.hibernate.javax.cache.provider=org.ehcache.jsr107.EhcacheCachingProvider

# Logging Configuration
logging.level.org.springframework.web=INFO
logging.level.org.hibernate.SQL=WARN
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=WARN
logging.level.com.example.backend=INFO
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# File Upload Configuration
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB
spring.servlet.multipart.enabled=true

# Security Configuration
spring.security.user.name=${ADMIN_USERNAME:admin}
spring.security.user.password=${ADMIN_PASSWORD:secure_admin_password}

# Management and Monitoring
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=when-authorized
management.metrics.export.prometheus.enabled=true

# Redis Configuration for High-Performance Caching
spring.data.redis.host=${REDIS_HOST:localhost}
spring.data.redis.port=${REDIS_PORT:6379}
spring.data.redis.password=${REDIS_PASSWORD:}
spring.data.redis.timeout=2000ms
spring.data.redis.lettuce.pool.max-active=20
spring.data.redis.lettuce.pool.max-idle=10
spring.data.redis.lettuce.pool.min-idle=5
spring.data.redis.lettuce.pool.max-wait=2000ms

# Cache Configuration - Enhanced for High Volume
spring.cache.type=redis
spring.cache.redis.time-to-live=600000
spring.cache.redis.cache-null-values=false
spring.cache.redis.enable-statistics=true

# Async Configuration - Enhanced for High Volume
spring.task.execution.pool.core-size=20
spring.task.execution.pool.max-size=100
spring.task.execution.pool.queue-capacity=500
spring.task.execution.thread-name-prefix=async-
spring.task.execution.pool.keep-alive=60s

# Resilience4j Configuration for Circuit Breaker
resilience4j.circuitbreaker.instances.database.failure-rate-threshold=50
resilience4j.circuitbreaker.instances.database.wait-duration-in-open-state=30s
resilience4j.circuitbreaker.instances.database.sliding-window-size=10
resilience4j.circuitbreaker.instances.database.minimum-number-of-calls=5

# Retry Configuration
resilience4j.retry.instances.database.max-attempts=3
resilience4j.retry.instances.database.wait-duration=1s

# Rate Limiting
resilience4j.ratelimiter.instances.api.limit-for-period=100
resilience4j.ratelimiter.instances.api.limit-refresh-period=1s
resilience4j.ratelimiter.instances.api.timeout-duration=0s

# JWT Configuration for Production
jwt.secret=${JWT_SECRET:mySecretKey123456789012345678901234567890}
jwt.expiration=${JWT_EXPIRATION:86400000}

# Security Configuration
spring.security.require-ssl=false
spring.security.user.name=${ADMIN_USERNAME:admin}
spring.security.user.password=${ADMIN_PASSWORD:secure_admin_password}

# Email Configuration for Production
spring.mail.host=${MAIL_HOST:smtp.gmail.com}
spring.mail.port=${MAIL_PORT:587}
spring.mail.username=${MAIL_USERNAME:}
spring.mail.password=${MAIL_PASSWORD:}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.ssl.trust=${MAIL_HOST:smtp.gmail.com}

# File Storage Configuration
file.upload-dir=${FILE_UPLOAD_DIR:/var/app/uploads}
file.max-size=10485760

# Application Specific Configuration
app.name=Procure Management System
app.version=2.0.0
app.environment=production

# Performance Monitoring
app.monitoring.enabled=true
app.monitoring.slow-query-threshold=1000

# Rate Limiting (if implemented)
app.rate-limit.requests-per-minute=100
app.rate-limit.burst-capacity=200
