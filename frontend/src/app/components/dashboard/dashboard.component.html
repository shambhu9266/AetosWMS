<div class="dashboard">
  <!-- Header -->
  <div class="dashboard-header">
    <div class="header-content">
      <h1 class="page-title">Dashboard</h1>
      <p class="page-subtitle" *ngIf="!authService.isEmployee()">Welcome back! Here's what's happening with your procurement system.</p>
      <p class="page-subtitle" *ngIf="authService.isEmployee()">Welcome! Create your purchase requisitions here.</p>
    </div>
    <div class="header-actions">
      <div class="date-time">
        <span class="date">{{ getCurrentDate() }}</span>
        <span class="time">{{ getCurrentTime() }}</span>
      </div>
    </div>
  </div>

  <!-- Stats Grid -->
  <div class="stats-grid">
    <!-- Manager/Admin Stats -->
    <div *ngIf="!authService.isEmployee()" class="stat-card pending">
      <div class="stat-icon">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
          <path d="M12 6V12L16 14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
      <div class="stat-content">
        <h3>Pending Approvals</h3>
        <p class="stat-number">{{ stats().pendingApprovals }}</p>
        <p class="stat-label">Requires attention</p>
      </div>
    </div>

    <div *ngIf="!authService.isEmployee()" class="stat-card approved">
      <div class="stat-icon">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
      <div class="stat-content">
        <h3>Approved This Month</h3>
        <p class="stat-number">{{ stats().approvedThisMonth }}</p>
        <p class="stat-label">Requisitions</p>
      </div>
    </div>

    <div *ngIf="!authService.isEmployee()" class="stat-card orders">
      <div class="stat-icon">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M16 11V7C16 4.79086 14.2091 3 12 3C9.79086 3 8 4.79086 8 7V11M5 9H19L18 21H6L5 9Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
      <div class="stat-content">
        <h3>Active Orders</h3>
        <p class="stat-number">{{ stats().activeOrders }}</p>
        <p class="stat-label">In progress</p>
      </div>
    </div>

    <!-- Employee Stats Cards -->
    <div *ngIf="authService.isEmployee()" class="stat-card my-requisitions">
      <div class="stat-icon">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M14 2H6C4.9 2 4 2.9 4 4V20C4 21.1 4.89 22 5.99 22H18C19.1 22 20 21.1 20 20V8L14 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M14 2V8H20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
      <div class="stat-content">
        <h3>My Requisitions</h3>
        <p class="stat-number">{{ stats().myRequisitions }}</p>
        <p class="stat-label">Total submitted</p>
      </div>
    </div>

    <div *ngIf="authService.isEmployee()" class="stat-card pending-mine">
      <div class="stat-icon">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
          <path d="M12 6V12L16 14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
      <div class="stat-content">
        <h3>Pending Review</h3>
        <p class="stat-number">{{ stats().pendingMyRequisitions }}</p>
        <p class="stat-label">Awaiting approval</p>
      </div>
    </div>

    <div *ngIf="authService.isEmployee()" class="stat-card approved-mine">
      <div class="stat-icon">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
      <div class="stat-content">
        <h3>Approved</h3>
        <p class="stat-number">{{ stats().approvedMyRequisitions }}</p>
        <p class="stat-label">Successfully approved</p>
      </div>
    </div>

  </div>

  <!-- Main Content Grid -->
  <div class="dashboard-grid">
    <!-- Recent Requisitions (Managers/Admins only) -->
    <div class="dashboard-card" *ngIf="!authService.isEmployee()">
      <div class="card-header">
        <h3>Recent Requisitions</h3>
        <a routerLink="/requisitions" class="btn-link">View All</a>
      </div>
      <div class="card-content">
        <div class="requisition-list">
          <div class="requisition-item" *ngFor="let req of pendingApprovals()">
            <div class="req-info">
              <h4>{{ getItemNames(req) }}</h4>
              <p>Qty: {{ getTotalQuantity(req) }} ‚Ä¢ {{ formatCurrency(getTotalAmount(req)) }}</p>
              <span class="req-requester">{{ req.createdBy }}</span>
            </div>
            <div class="req-status">
              <span class="status-badge" [class]="getStatusClass(req.status)">
                {{ req.status }}
              </span>
              <span class="req-date">{{ req.createdAt | date:'short' }}</span>
            </div>
          </div>
          <div *ngIf="pendingApprovals().length === 0" class="no-data">
            <p>No recent requisitions found</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Employee Recent Requisitions -->
    <div class="dashboard-card" *ngIf="authService.isEmployee()">
      <div class="card-header">
        <h3>My Recent Requisitions</h3>
        <a routerLink="/requisitions" class="btn-link">View All</a>
      </div>
      <div class="card-content">
        <div class="requisition-list">
          <div class="requisition-item" *ngFor="let req of myRecentRequisitions">
            <div class="req-info">
              <h4>{{ getItemNames(req) }}</h4>
              <p>Qty: {{ getTotalQuantity(req) }} ‚Ä¢ {{ formatCurrency(getTotalAmount(req)) }}</p>
              <span class="req-department">{{ req.department }}</span>
            </div>
            <div class="req-status">
              <span class="status-badge" [class]="getStatusClass(req.status)">
                {{ req.status }}
              </span>
              <span class="req-date">{{ req.createdAt | date:'short' }}</span>
            </div>
          </div>
          <div *ngIf="myRecentRequisitions.length === 0" class="no-data">
            <div class="empty-state">
              <div class="empty-icon">
                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M14 2H6C4.9 2 4 2.9 4 4V20C4 21.1 4.89 22 5.99 22H18C19.1 22 20 21.1 20 20V8L14 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  <path d="M14 2V8H20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </div>
              <h4>No Requisitions Yet</h4>
              <p>You haven't created any purchase requisitions yet.</p>
              <a routerLink="/requisitions" class="primary-btn">Create Your First PR</a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Employee Pending Approvals (My Own Requisitions) -->
    <div class="dashboard-card" *ngIf="authService.isEmployee()">
      <div class="card-header">
        <h3>My Pending Requisitions</h3>
        <a routerLink="/requisitions" class="btn-link">View All</a>
      </div>
      <div class="card-content">
        <div class="approval-list">
          <div class="approval-item" *ngFor="let approval of myPendingRequisitions">
            <div class="approval-info">
              <h4>{{ getItemNames(approval) }}</h4>
              <p>{{ approval.department }}</p>
              <span class="approval-details">Qty: {{ getTotalQuantity(approval) }} ‚Ä¢ {{ formatCurrency(getTotalAmount(approval)) }}</span>
            </div>
            <div class="approval-actions">
              <span class="status-badge" [class]="getStatusClass(approval.status)">
                {{ approval.status }}
              </span>
              <div class="action-buttons">
                <button class="btn-view" (click)="viewRequisitionDetails(approval)">View Details</button>
              </div>
            </div>
          </div>
          <div *ngIf="myPendingRequisitions.length === 0" class="no-data">
            <div class="empty-state">
              <div class="empty-icon">
                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                  <path d="M12 6V12L16 14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </div>
              <h4>No Pending Requisitions</h4>
              <p>All your requisitions have been processed or you haven't created any yet.</p>
              <a routerLink="/requisitions" class="primary-btn">Create New Requisition</a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Employee PDF Management Section -->
    <div class="finance-pdf-section" *ngIf="authService.isEmployee()">
      <div class="section-header">
        <h2>My Uploaded Documents</h2>
      </div>

      <!-- Summary Cards -->
      <div class="summary-cards" *ngIf="requisitionPdfGroups().length > 0">
        <div class="summary-card">
          <div class="card-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M9 12H15M9 16H15M17 21H7C5.89543 21 5 20.1046 5 19V5C5 3.89543 5.89543 3 7 3H12.5858C12.851 3 13.1054 3.10536 13.2929 3.29289L19.7071 9.70711C19.8946 9.89464 20 10.149 20 10.4142V19C20 20.1046 19.1046 21 18 21H17Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <div class="card-content">
            <div class="card-number">{{ requisitionPdfGroups().length }}</div>
            <div class="card-label">Requisitions</div>
          </div>
        </div>
        
        <div class="summary-card">
          <div class="card-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M14 2H6C4.89543 2 4 2.89543 4 4V20C4 21.1046 4.89543 22 6 22H18C19.1046 22 20 21.1046 20 20V8L14 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M14 2V8H20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <div class="card-content">
            <div class="card-number">{{ uploadedPdfs().length }}</div>
            <div class="card-label">Total Documents</div>
          </div>
        </div>
        
        <div class="summary-card">
          <div class="card-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <div class="card-content">
            <div class="card-number">{{ getPendingPdfsCount() }}</div>
            <div class="card-label">Pending Review</div>
          </div>
        </div>
      </div>

      <!-- Requisition Groups -->
      <div class="user-groups" *ngIf="requisitionPdfGroups().length > 0">
        <div class="user-group" *ngFor="let requisitionGroup of requisitionPdfGroups()">
          <!-- Requisition Header -->
          <div class="user-header" (click)="toggleRequisitionSlot(requisitionGroup.requisitionId)">
            <div class="user-info">
              <div class="user-avatar">
                <span *ngIf="requisitionGroup.requisitionId === 0">üìÑ</span>
                <span *ngIf="requisitionGroup.requisitionId !== 0">#{{ requisitionGroup.requisitionId }}</span>
              </div>
              <div class="user-details">
                <h3 class="user-name">
                  <span *ngIf="requisitionGroup.requisitionId === 0">Unlinked Documents</span>
                  <span *ngIf="requisitionGroup.requisitionId !== 0">
                    {{ requisitionGroup.requisitionInfo?.itemName || 'Requisition #' + requisitionGroup.requisitionId }}
                  </span>
                </h3>
                <p class="user-role" *ngIf="requisitionGroup.requisitionId !== 0">
                  {{ requisitionGroup.requisitionInfo?.department || 'Department' }} ‚Ä¢ 
                  {{ requisitionGroup.requisitionInfo?.quantity || 'N/A' }} units ‚Ä¢ 
                  {{ requisitionGroup.requisitionInfo?.price ? (requisitionGroup.requisitionInfo?.price | currency:'INR':'symbol':'1.0-0') : 'N/A' }}
                </p>
                <p class="user-role" *ngIf="requisitionGroup.requisitionId === 0">
                  Documents not linked to any specific requisition
                </p>
                <div class="user-stats">
                  <span class="stat-item">
                    <span class="stat-number">{{ requisitionGroup.totalPdfs }}</span>
                    <span class="stat-label">Documents</span>
                  </span>
                  <span class="stat-item pending">
                    <span class="stat-number">{{ requisitionGroup.pendingCount }}</span>
                    <span class="stat-label">Pending</span>
                  </span>
                  <span class="stat-item processed">
                    <span class="stat-number">{{ requisitionGroup.processedCount }}</span>
                    <span class="stat-label">Processed</span>
                  </span>
                  <button class="add-pdf-btn" 
                  (click)="openAddPdfModal(requisitionGroup.requisitionId)" 
                  title="Add PDF to this requisition"
                  *ngIf="requisitionGroup.requisitionId !== 0">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M14 2H6C4.89543 2 4 2.89543 4 4V20C4 21.1046 4.89543 22 6 22H18C19.1046 22 20 21.1046 20 20V8L14 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M14 2V8H20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M12 11V17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M8 14H16" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            
          </button>
                </div>
              </div>
            </div>
            <div class="user-actions">
              <div class="last-upload">
                Uploaded by: {{ requisitionGroup.uploadedBy }} ‚Ä¢ {{ requisitionGroup.lastUploadDate | date:'MMM dd, yyyy' }}
              </div>
              <div class="requisition-actions">
               
                <button class="expand-btn" [class.expanded]="isRequisitionSlotExpanded(requisitionGroup.requisitionId)">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M6 9L12 15L18 9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </button>
              </div>
            </div>
          </div>

          <!-- PDFs List -->
          <div class="pdfs-container" [class.expanded]="isRequisitionSlotExpanded(requisitionGroup.requisitionId)">
            <div class="pdfs-grid">
              <div class="pdf-card" *ngFor="let pdf of requisitionGroup.pdfs">
                <!-- Card Header with Status -->
                <div class="pdf-card-header">
                  <div class="pdf-status-indicator" [class]="getPdfStatusClass(pdf)"></div>
                  <div class="pdf-status-badge" [class]="getPdfStatusClass(pdf)">
                    {{ getPdfStatusText(pdf) }}
                  </div>
                </div>

                <!-- Card Content -->
                <div class="pdf-card-content">
                  <div class="pdf-icon-section">
                    <div class="pdf-icon">
                      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M14 2H6C4.89543 2 4 2.89543 4 4V20C4 21.1046 4.89543 22 6 22H18C19.1046 22 20 21.1046 20 20V8L14 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M14 2V8H20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      </svg>
                    </div>
                  </div>

                  <div class="pdf-details">
                    <h4 class="pdf-title">{{ pdf.originalFileName }}</h4>
                    <p class="pdf-description" *ngIf="pdf.description">{{ pdf.description }}</p>
                    
                    <div class="pdf-meta-info">
                      <div class="meta-row">
                        <span class="meta-icon">üìÖ</span>
                        <span class="meta-text">{{ pdf.uploadedAt | date:'MMM dd, yyyy' }}</span>
                      </div>
                      <div class="meta-row" *ngIf="pdf.processed">
                        <span class="meta-icon">‚úÖ</span>
                        <span class="meta-text">Processed</span>
                      </div>
                      <div class="meta-row" *ngIf="pdf.rejectionReason">
                        <span class="meta-icon">‚ùå</span>
                        <span class="meta-text rejection">{{ pdf.rejectionReason }}</span>
                      </div>
                    </div>
                  </div>
                </div>
                <!-- Card Actions -->
                <div class="pdf-card-actions">
                  <button class="action-btn primary" (click)="downloadPdf(pdf)" title="Download PDF">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M21 15V19C21 19.5304 20.7893 20.4142 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 5.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      <path d="M7 10L12 15L17 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      <path d="M12 15V3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Download
                  </button>
                  
                  <button class="action-btn danger" (click)="deletePdf(pdf)" title="Delete PDF">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M3 6H5H21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      <path d="M8 6V4C8 3.46957 8.21071 2.96086 8.58579 2.58579C8.96086 2.21071 9.46957 2 10 2H14C14.5304 2 15.0391 2.21071 15.4142 2.58579C15.7893 2.96086 16 3.46957 16 4V6M19 6V20C19 20.5304 18.7893 21.0391 18.4142 21.4142C18.0391 21.7893 17.5304 22 17 22H7C6.46957 22 5.96086 21.7893 5.58579 21.4142C5.21071 21.0391 5 20.5304 5 20V6H19Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      <path d="M10 11V17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      <path d="M14 11V17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Delete
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Empty State -->
      <div class="empty-state" *ngIf="requisitionPdfGroups().length === 0">
        <div class="empty-icon">
          <svg width="64" height="64" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M14 2H6C4.89543 2 4 2.89543 4 4V20C4 21.1046 4.89543 22 6 22H18C19.1046 22 20 21.1046 20 20V8L14 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M14 2V8H20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <h3>No Documents Uploaded</h3>
        
      </div>
    </div>

    <!-- Pending Approvals (Managers/Admins only) -->
    <div class="dashboard-card" *ngIf="!authService.isEmployee()">
      <div class="card-header">
        <h3>Pending Approvals</h3>
        <a routerLink="/approvals" class="btn-link">View All</a>
      </div>
      <div class="card-content">
        <div class="approval-list">
          <div class="approval-item" *ngFor="let approval of pendingApprovals()">
            <div class="approval-info">
              <h4>{{ getItemNames(approval) }}</h4>
              <p>{{ approval.createdBy }}</p>
              <span class="approval-details">Qty: {{ getTotalQuantity(approval) }} ‚Ä¢ {{ formatCurrency(getTotalAmount(approval)) }}</span>
            </div>
            <div class="approval-actions">
              <span class="status-badge" [class]="getStatusClass(approval.status)">
                {{ approval.status }}
              </span>
              <div class="action-buttons">
                <button class="btn-approve" (click)="quickApprove(approval.id)">Approve</button>
                <button class="btn-reject" (click)="quickReject(approval.id)">Reject</button>
              </div>
            </div>
          </div>
          <div *ngIf="pendingApprovals().length === 0" class="no-data">
            <p>No pending approvals</p>
          </div>
        </div>
      </div>
    </div>

    <!-- PDF Management Section (Finance Managers, IT Managers, and Department Managers) -->
    <div class="finance-pdf-section" *ngIf="canAccessFinanceApprovals() || authService.canAccessITApprovals() || authService.isDepartmentManager()">
        <!-- Section Header for Department Managers -->
        <div class="section-header department-manager-header" *ngIf="authService.isDepartmentManager() && !authService.canAccessITApprovals() && !authService.canAccessFinanceApprovals()">
          <h2>Documents</h2>
        </div>
        
        <!-- Section Header for IT Managers -->
        <div class="section-header it-manager-header" *ngIf="authService.canAccessITApprovals() && !canAccessFinanceApprovals()">
          <h2>Documents</h2>
        </div>
        
        <!-- Header Actions -->
        
        
        <!-- Workflow Info -->
        <div class="workflow-info-section" *ngIf="authService.isDepartmentManager() && !authService.canAccessITApprovals() && !authService.canAccessFinanceApprovals()">
          <p class="workflow-info">üìã All documents are visible here with their current approval status</p>
          <p class="workflow-info">‚úÖ You can approve documents in "Pending Department Approval" status</p>
        </div>
        
        <div class="workflow-info-section" *ngIf="canAccessFinanceApprovals() && !authService.canAccessITApprovals()">
          <p class="workflow-info">üìã Only IT-approved documents are visible here</p>
          <p class="workflow-info">‚úÖ You can approve documents in "Pending Finance Approval" status</p>
        </div>
        
        <div class="workflow-info-section" *ngIf="authService.canAccessITApprovals() && !canAccessFinanceApprovals()">
          <p class="workflow-info">üìã All documents are visible here with their current approval status</p>
          <p class="workflow-info">‚úÖ You can approve documents in "Pending IT Approval" status</p>
        </div>

      <!-- Summary Cards -->
      <div class="summary-cards" *ngIf="requisitionPdfGroups().length > 0">
        <div class="summary-card">
          <div class="card-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M9 12H15M9 16H15M17 21H7C5.89543 21 5 20.1046 5 19V5C5 3.89543 5.89543 3 7 3H12.5858C12.851 3 13.1054 3.10536 13.2929 3.29289L19.7071 9.70711C19.8946 9.89464 20 10.149 20 10.4142V19C20 20.1046 19.1046 21 18 21H17Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <div class="card-content">
            <div class="card-number">{{ requisitionPdfGroups().length }}</div>
            <div class="card-label">Requisitions</div>
          </div>
        </div>
        
        <div class="summary-card">
          <div class="card-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M14 2H6C4.89543 2 4 2.89543 4 4V20C4 21.1046 4.89543 22 6 22H18C19.1046 22 20 21.1046 20 20V8L14 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M14 2V8H20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <div class="card-content">
            <div class="card-number">{{ uploadedPdfs().length }}</div>
            <div class="card-label">Total Documents</div>
          </div>
        </div>
        
      </div>

      <!-- Requisition Groups -->
      <div class="user-groups" *ngIf="requisitionPdfGroups().length > 0">
        <div class="user-group" *ngFor="let requisitionGroup of requisitionPdfGroups()">
          <!-- Requisition Header -->
          <div class="user-header" (click)="toggleRequisitionSlot(requisitionGroup.requisitionId)">
            <div class="user-info">
              <div class="user-avatar">
                <span *ngIf="requisitionGroup.requisitionId === 0">üìÑ</span>
                <span *ngIf="requisitionGroup.requisitionId !== 0">#{{ requisitionGroup.requisitionId }}</span>
              </div>
              <div class="user-details">
                <h3 class="user-name">
                  <span *ngIf="requisitionGroup.requisitionId === 0">Unlinked Documents</span>
                  <span *ngIf="requisitionGroup.requisitionId !== 0">
                    {{ requisitionGroup.requisitionInfo?.itemName || 'Requisition #' + requisitionGroup.requisitionId }}
                  </span>
                </h3>
                <p class="user-role" *ngIf="requisitionGroup.requisitionId !== 0">
                  {{ requisitionGroup.requisitionInfo?.department || 'Department' }} ‚Ä¢ 
                  {{ requisitionGroup.requisitionInfo?.quantity || 'N/A' }} units ‚Ä¢ 
                  {{ requisitionGroup.requisitionInfo?.price ? (requisitionGroup.requisitionInfo?.price | currency:'INR':'symbol':'1.0-0') : 'N/A' }}
                </p>
                <p class="user-role" *ngIf="requisitionGroup.requisitionId === 0">
                  Documents not linked to any specific requisition
                </p>
                <div class="user-stats">
                  <span class="stat-item">
                    <span class="stat-number">{{ requisitionGroup.totalPdfs }}</span>
                    <span class="stat-label">Documents</span>
                  </span>
                  <span class="stat-item pending">
                    <span class="stat-number">{{ requisitionGroup.pendingCount }}</span>
                    <span class="stat-label">Pending</span>
                  </span>
                  <span class="stat-item processed">
                    <span class="stat-number">{{ requisitionGroup.processedCount }}</span>
                    <span class="stat-label">Processed</span>
                  </span>
                  <button class="add-pdf-btn" 
                        (click)="openAddPdfModal(requisitionGroup.requisitionId)"
                        title="Add PDF to this requisition"
                        *ngIf="requisitionGroup.requisitionId !== 0">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M14 2H6C4.89543 2 4 2.89543 4 4V20C4 21.1046 4.89543 22 6 22H18C19.1046 22 20 21.1046 20 20V8L14 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M14 2V8H20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M12 11V17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M8 14H16" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                
                </button>
                </div>
              </div>
            </div>
            <div class="user-actions">
              <div class="last-upload">
                Uploaded by: {{ requisitionGroup.uploadedBy }} ‚Ä¢ {{ requisitionGroup.lastUploadDate | date:'MMM dd, yyyy' }}
              </div>
              <div class="requisition-actions">
                
              <button class="expand-btn" [class.expanded]="isRequisitionSlotExpanded(requisitionGroup.requisitionId)">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M6 9L12 15L18 9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </button>
              </div>
            </div>
          </div>

          <!-- PDFs List -->
          <div class="pdfs-container" [class.expanded]="isRequisitionSlotExpanded(requisitionGroup.requisitionId)">
            <div class="pdfs-grid">
              <div class="pdf-card" *ngFor="let pdf of requisitionGroup.pdfs">
                <!-- Card Header with Status -->
                <div class="pdf-card-header">
                  <div class="pdf-status-indicator" [class]="getPdfStatusClass(pdf)"></div>
                  <div class="pdf-status-badge" [class]="getPdfStatusClass(pdf)">
                    {{ getPdfStatusText(pdf) }}
                  </div>
                </div>

                <!-- Card Content -->
                <div class="pdf-card-content">
                  <div class="pdf-icon-section">
                    <div class="pdf-icon">
                      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M14 2H6C4.89543 2 4 2.89543 4 4V20C4 21.1046 4.89543 22 6 22H18C19.1046 22 20 21.1046 20 20V8L14 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M14 2V8H20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      </svg>
                    </div>
                  </div>

                  <div class="pdf-details">
                    <h4 class="pdf-title">{{ pdf.originalFileName }}</h4>
                    <p class="pdf-description" *ngIf="pdf.description">{{ pdf.description }}</p>
                    
                    <!-- Requisition Badge -->
                    <div class="requisition-badge" *ngIf="pdf.requisitionId">
                      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M10 13C10.4295 13.5741 10.9774 14.0491 11.6066 14.3929C12.2357 14.7367 12.9315 14.9411 13.6467 14.9923C14.3618 15.0435 15.0796 14.9403 15.7513 14.6897C16.4231 14.4392 17.0331 14.047 17.54 13.54L20.54 10.54C21.4508 9.59695 21.9548 8.33394 21.9434 7.02296C21.932 5.71198 21.4061 4.45791 20.4791 3.53087C19.5521 2.60383 18.298 2.07799 16.987 2.0666C15.676 2.0552 14.413 2.55918 13.47 3.47L11.75 5.18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M14 11C13.5705 10.4259 13.0226 9.95085 12.3934 9.60705C11.7643 9.26325 11.0685 9.05886 10.3533 9.00766C9.63816 8.95645 8.92037 9.05972 8.24861 9.31026C7.57685 9.5608 6.96684 9.953 6.46 10.46L3.46 13.46C2.54918 14.403 2.04519 15.666 2.05659 16.977C2.06798 18.288 2.59382 19.542 3.52086 20.4691C4.4479 21.3961 5.70197 21.922 7.01295 21.9334C8.32393 21.9448 9.58694 21.4408 10.53 20.53L12.24 18.82" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      </svg>
                      Requisition #{{ pdf.requisitionId }}
                    </div>
                    <div class="unlinked-badge" *ngIf="!pdf.requisitionId">
                      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M9 12H15M9 16H15M17 21H7C5.89543 21 5 20.1046 5 19V5C5 3.89543 5.89543 3 7 3H12.5858C12.851 3 13.1054 3.10536 13.2929 3.29289L19.7071 9.70711C19.8946 9.89464 20 10.149 20 10.4142V19C20 20.1046 19.1046 21 18 21H17Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      </svg>
                      Not linked to requisition
                    </div>
                    
                    <div class="pdf-meta-info">
                      <div class="meta-row">
                        <span class="meta-icon">üìÖ</span>
                        <span class="meta-text">{{ pdf.uploadedAt | date:'MMM dd, yyyy' }}</span>
                      </div>
                      <div class="meta-row">
                        <span class="meta-icon">üë§</span>
                        <span class="meta-text">by {{ pdf.uploadedBy }}</span>
                      </div>
                      <div class="meta-row" *ngIf="pdf.rejected && pdf.rejectionReason">
                        <span class="meta-icon">‚ùå</span>
                        <span class="meta-text rejection">{{ pdf.rejectionReason }}</span>
                      </div>
                    </div>
                    
                    <!-- Status Indicator for Department Managers -->
                    <div class="status-indicator" *ngIf="authService.isDepartmentManager() && !authService.canAccessITApprovals() && !authService.canAccessFinanceApprovals()">
                      <div class="status-badge" [ngClass]="getPdfStatusClass(pdf)">
                        <span class="status-icon">{{ getStatusIcon(pdf) }}</span>
                        <span class="status-text">{{ getStatusText(pdf) }}</span>
                      </div>
                    </div>
                    
                    <!-- Status Indicator for IT Managers -->
                    <div class="status-indicator" *ngIf="authService.canAccessITApprovals() && !canAccessFinanceApprovals()">
                      <div class="status-badge" [ngClass]="getItPdfStatusClass(pdf)">
                        <span class="status-icon">{{ getItStatusIcon(pdf) }}</span>
                        <span class="status-text">{{ getItStatusText(pdf) }}</span>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Card Actions -->
                <div class="pdf-card-actions">
                  <button class="action-btn primary" (click)="downloadPdf(pdf)" title="Download PDF">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M21 15V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      <path d="M7 10L12 15L17 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      <path d="M12 15V3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Download
                  </button>
                  
                  <!-- Department Manager buttons -->
                  <button *ngIf="authService.isDepartmentManager() && !authService.canAccessITApprovals() && !authService.canAccessFinanceApprovals() && !pdf.processed && !pdf.rejected && (pdf.approvalStage === 'DEPARTMENT' || !pdf.approvalStage)" class="action-btn success" (click)="markPdfAsProcessed(pdf)" [title]="getApprovalButtonTitle()">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    {{ getApprovalButtonText() }}
                  </button>
                  
                  <button *ngIf="authService.isDepartmentManager() && !authService.canAccessITApprovals() && !authService.canAccessFinanceApprovals() && !pdf.processed && !pdf.rejected && (pdf.approvalStage === 'DEPARTMENT' || !pdf.approvalStage)" class="action-btn warning" (click)="rejectPdf(pdf)" title="Reject PDF">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Reject
                  </button>
                  
                  <!-- IT Manager buttons -->
                  <button *ngIf="authService.canAccessITApprovals() && !canAccessFinanceApprovals() && !pdf.processed && !pdf.rejected && (pdf.approvalStage === 'IT' || !pdf.approvalStage)" class="action-btn success" (click)="markPdfAsProcessed(pdf)" [title]="getApprovalButtonTitle()">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    {{ getApprovalButtonText() }}
                  </button>
                  
                  <button *ngIf="authService.canAccessITApprovals() && !canAccessFinanceApprovals() && !pdf.processed && !pdf.rejected && (pdf.approvalStage === 'IT' || !pdf.approvalStage)" class="action-btn warning" (click)="rejectPdf(pdf)" title="Reject PDF">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Reject
                  </button>
                  
                  <!-- Finance Manager buttons -->
                  <button *ngIf="canAccessFinanceApprovals() && !authService.canAccessITApprovals() && !pdf.processed && !pdf.rejected && (pdf.approvalStage === 'FINANCE' || pdf.approvalStage === 'IT')" class="action-btn success" (click)="markPdfAsProcessed(pdf)" [title]="getApprovalButtonTitle()">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    {{ getApprovalButtonText() }}
                  </button>
                  
                  <button *ngIf="canAccessFinanceApprovals() && !authService.canAccessITApprovals() && !pdf.processed && !pdf.rejected && (pdf.approvalStage === 'FINANCE' || pdf.approvalStage === 'IT')" class="action-btn warning" (click)="rejectPdf(pdf)" title="Reject PDF">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Reject
                  </button>
                  
                  <button class="action-btn danger" (click)="deletePdf(pdf)" title="Delete PDF">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M3 6H5H21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      <path d="M8 6V4C8 3.46957 8.21071 2.96086 8.58579 2.58579C8.96086 2.21071 9.46957 2 10 2H14C14.5304 2 15.0391 2.21071 15.4142 2.58579C15.7893 2.96086 16 3.46957 16 4V6M19 6V20C19 20.5304 18.7893 21.0391 18.4142 21.4142C18.0391 21.7893 17.5304 22 17 22H7C6.46957 22 5.96086 21.7893 5.58579 21.4142C5.21071 21.0391 5 20.5304 5 20V6H19Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      <path d="M10 11V17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      <path d="M14 11V17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Delete
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Empty State -->
      <div class="empty-state" *ngIf="requisitionPdfGroups().length === 0">
        <div class="empty-icon">
          <svg width="64" height="64" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M14 2H6C4.89543 2 4 2.89543 4 4V20C4 21.1046 4.89543 22 6 22H18C19.1046 22 20 21.1046 20 20V8L14 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M14 2V8H20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <h3>No Documents Available</h3>
        <p>No vendor documents have been uploaded yet</p>
      </div>
    </div>

  </div>

  <!-- Requisition Details Modal -->
  <div class="modal-overlay" *ngIf="showRequisitionModal()" (click)="closeRequisitionModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h2>Requisition Details</h2>
        <button class="modal-close" (click)="closeRequisitionModal()">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
      </div>
      
      <div class="modal-body" *ngIf="selectedRequisition()">
        <div class="requisition-details">
          <!-- Basic Information -->
          <div class="detail-section">
            <h3>Basic Information</h3>
            <div class="detail-grid">
              <div class="detail-item">
                <label>Requisition ID:</label>
                <span>#{{ selectedRequisition()?.id }}</span>
              </div>
              <div class="detail-item">
                <label>Status:</label>
                <span class="status-badge" [class]="getStatusColorClass(selectedRequisition()?.status || '')">
                  {{ getStatusDisplayText(selectedRequisition()?.status || '') }}
                </span>
              </div>
              <div class="detail-item">
                <label>Created By:</label>
                <span>{{ selectedRequisition()?.createdBy }}</span>
              </div>
              <div class="detail-item">
                <label>Department:</label>
                <span>{{ selectedRequisition()?.department }}</span>
              </div>
              <div class="detail-item">
                <label>Created Date:</label>
                <span>{{ selectedRequisition()?.createdAt | date:'medium' }}</span>
              </div>
            </div>
          </div>

          <!-- Items Information -->
          <div class="detail-section">
            <h3>Items</h3>
            <div *ngIf="selectedRequisition()?.items && selectedRequisition()?.items!.length > 0; else singleItemTemplate">
              <!-- Multi-item requisition -->
              <div class="items-table">
                <div class="table-header">
                  <div class="col-item">Item Name</div>
                  <div class="col-qty">Quantity</div>
                  <div class="col-price">Unit Price</div>
                  <div class="col-total">Total</div>
                </div>
                <div class="table-row" *ngFor="let item of selectedRequisition()?.items">
                  <div class="col-item">{{ item.itemName }}</div>
                  <div class="col-qty">{{ item.quantity }}</div>
                  <div class="col-price">{{ formatCurrency(item.price) }}</div>
                  <div class="col-total">{{ formatCurrency(item.price * item.quantity) }}</div>
                </div>
                <div class="table-footer">
                  <div class="col-item"><strong>Total:</strong></div>
                  <div class="col-qty"><strong>{{ getTotalQuantity(selectedRequisition()!) }}</strong></div>
                  <div class="col-price"></div>
                  <div class="col-total"><strong>{{ formatCurrency(getTotalAmount(selectedRequisition()!)) }}</strong></div>
                </div>
              </div>
            </div>
            <ng-template #singleItemTemplate>
              <!-- Single-item requisition -->
              <div class="single-item-details">
                <div class="item-info">
                  <div class="item-name">{{ selectedRequisition()?.itemName || 'N/A' }}</div>
                  <div class="item-details">
                    <span>Quantity: {{ selectedRequisition()?.quantity || 0 }}</span>
                    <span>Unit Price: {{ formatCurrency(selectedRequisition()?.price || 0) }}</span>
                    <span>Total: {{ formatCurrency(getTotalAmount(selectedRequisition()!)) }}</span>
                  </div>
                </div>
              </div>
            </ng-template>
          </div>

          <!-- Summary -->
          <div class="detail-section">
            <h3>Summary</h3>
            <div class="summary-grid">
              <div class="summary-item">
                <label>Total Items:</label>
                <span>{{ selectedRequisition()?.items?.length || 1 }}</span>
              </div>
              <div class="summary-item">
                <label>Total Quantity:</label>
                <span>{{ getTotalQuantity(selectedRequisition()!) }}</span>
              </div>
              <div class="summary-item">
                <label>Total Amount:</label>
                <span class="total-amount">{{ formatCurrency(getTotalAmount(selectedRequisition()!)) }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="modal-footer">
        <button class="btn-secondary" (click)="closeRequisitionModal()">Close</button>
        <a routerLink="/requisitions" class="btn-primary" (click)="closeRequisitionModal()">Go to Requisitions</a>
      </div>
    </div>
  </div>

  <!-- Add PDF Modal -->
  <div class="modal-overlay" *ngIf="showAddPdfModal()" (click)="closeAddPdfModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h2>Add PDF to Requisition #{{ selectedRequisitionIdForPdf() }}</h2>
        <button class="modal-close" (click)="closeAddPdfModal()">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
      </div>
      
      <div class="modal-body">
        <div class="upload-form">
          <div class="form-group">
            <label for="pdfFile">Select PDF File</label>
            <input type="file" 
                   id="pdfFile" 
                   #fileInput
                   (change)="onFileSelected($event)"
                   accept=".pdf"
                   class="file-input">
            <div class="file-info" *ngIf="selectedFileForUpload()">
              <span class="file-name">{{ selectedFileForUpload()?.name }}</span>
              <span class="file-size">{{ formatFileSize(selectedFileForUpload()?.size || 0) }}</span>
            </div>
          </div>
          
          <div class="form-group">
            <label for="pdfDescription">Description (Optional)</label>
            <textarea id="pdfDescription" 
                      [(ngModel)]="pdfDescription" 
                      placeholder="Enter a description for this PDF..."
                      class="description-input"
                      rows="3"></textarea>
          </div>
        </div>
      </div>
      
      <div class="modal-footer">
        <button class="btn-secondary" (click)="closeAddPdfModal()">Cancel</button>
        <button class="btn-primary" 
                (click)="uploadPdfToRequisition()" 
                [disabled]="!selectedFileForUpload || isUploading()">
          <span *ngIf="!isUploading()">Upload PDF</span>
          <span *ngIf="isUploading()">Uploading...</span>
        </button>
      </div>
    </div>
  </div>

</div>
